<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± ÙˆØ§Ù„Ø°Ù‡Ø¨ Ø§Ù„ÙŠÙˆÙ…</title>
  <style>
    body {
      font-family: 'Tahoma', sans-serif;
      background: linear-gradient(to right, #f8f9fa, #e9ecef);
      text-align: center;
      padding: 30px;
      direction: rtl;
    }
    h1 {
      color: #2c3e50;
      margin-bottom: 20px;
    }
    .card {
      background: white;
      padding: 20px;
      margin: 15px auto;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      max-width: 350px;
    }
    .price {
      font-size: 1.5em;
      margin: 10px 0;
    }
    footer {
      margin-top: 20px;
      font-size: 0.9em;
      color: #6c757d;
    }
  </style>
</head>
<body>
  <h1>ğŸ“ˆ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ÙŠÙˆÙ… ÙÙŠ Ø§Ù„Ø¹Ø±Ø§Ù‚</h1>
  
  <div class="card">
    <div class="price" id="usd">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø³Ø¹Ø± Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±...</div>
  </div>

  <div class="card">
    <div class="price" id="gold">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø³Ø¹Ø± Ø§Ù„Ø°Ù‡Ø¨...</div>
  </div>

  <footer>Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: <span id="lastUpdate"></span></footer>

  <script>
    async function fetchPrices() {
      try {
        // =========================
        // 1. Ø³Ø¹Ø± Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± Ù…Ù‚Ø§Ø¨Ù„ Ø§Ù„Ø¯ÙŠÙ†Ø§Ø± Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠ
        // =========================
        const usdRes = await fetch("https://api.allorigins.win/raw?url=" + encodeURIComponent("https://api.exchangerate.host/latest?base=USD&symbols=IQD"));
        const usdData = await usdRes.json();
        const usdRate = usdData.rates.IQD;
        document.getElementById("usd").innerText = `ğŸ’µ Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± = ${usdRate.toFixed(2)} Ø¯ÙŠÙ†Ø§Ø±`;

        // =========================
        // 2. Ø³Ø¹Ø± Ø§Ù„Ø°Ù‡Ø¨ Ø¨Ø§Ù„Ø£ÙˆÙ†ØµØ© Ø¨Ø§Ù„Ø¯ÙŠÙ†Ø§Ø± Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠ
        // =========================
        const metalsURL = "https://api.metals-api.com/v1/latest?access_key=6de8eae76be7dc1240f8dd8a6142f7ab&base=USD&symbols=XAU";
        const goldRes = await fetch("https://api.allorigins.win/raw?url=" + encodeURIComponent(metalsURL));
        const goldData = await goldRes.json();

        // Ø³Ø¹Ø± Ø§Ù„Ø°Ù‡Ø¨ Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± Ù„Ù„Ø£ÙˆÙ†ØµØ©
        const goldPriceUSD = 1 / goldData.rates.XAU; 
        const goldPriceIQD = goldPriceUSD * usdRate; 
        document.getElementById("gold").innerText = `ğŸ¥‡ Ø§Ù„Ø°Ù‡Ø¨ = ${goldPriceIQD.toFixed(0)} Ø¯ÙŠÙ†Ø§Ø± Ù„Ù„Ø£ÙˆÙ†ØµØ©`;

        // =========================
        // 3. Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«
        // =========================
        document.getElementById("lastUpdate").innerText = new Date().toLocaleString();

      } catch (error) {
        console.error(error);
        document.getElementById("usd").innerText = "Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø³Ø¹Ø± Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±";
        document.getElementById("gold").innerText = "Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø³Ø¹Ø± Ø§Ù„Ø°Ù‡Ø¨";
      }
    }

    fetchPrices();
    setInterval(fetchPrices, 60000); // ØªØ­Ø¯ÙŠØ« ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
  </script>
</body>
</html>
