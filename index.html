<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>أسعار الدولار والذهب اليوم</title>
  <style>
    body {
      font-family: 'Tahoma', sans-serif;
      background: linear-gradient(to right, #f8f9fa, #e9ecef);
      text-align: center;
      padding: 30px;
      direction: rtl;
    }
    h1 {
      color: #2c3e50;
      margin-bottom: 20px;
    }
    .card {
      background: white;
      padding: 20px;
      margin: 15px auto;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      max-width: 350px;
    }
    .price {
      font-size: 1.5em;
      margin: 10px 0;
    }
    footer {
      margin-top: 20px;
      font-size: 0.9em;
      color: #6c757d;
    }
  </style>
</head>
<body>
  <h1>📈 أسعار اليوم في العراق</h1>
  
  <div class="card">
    <div class="price" id="usd">جاري تحميل سعر الدولار...</div>
  </div>

  <div class="card">
    <div class="price" id="gold">جاري تحميل سعر الذهب...</div>
  </div>

  <footer>آخر تحديث: <span id="lastUpdate"></span></footer>

  <script>
    async function fetchPrices() {
      try {
        // =========================
        // 1. سعر الدولار مقابل الدينار العراقي
        // =========================
        const usdRes = await fetch("https://api.allorigins.win/raw?url=" + encodeURIComponent("https://api.exchangerate.host/latest?base=USD&symbols=IQD"));
        const usdData = await usdRes.json();
        const usdRate = usdData.rates.IQD;
        document.getElementById("usd").innerText = `💵 الدولار = ${usdRate.toFixed(2)} دينار`;

        // =========================
        // 2. سعر الذهب بالأونصة بالدينار العراقي
        // =========================
        const metalsURL = "https://api.metals-api.com/v1/latest?access_key=6de8eae76be7dc1240f8dd8a6142f7ab&base=USD&symbols=XAU";
        const goldRes = await fetch("https://api.allorigins.win/raw?url=" + encodeURIComponent(metalsURL));
        const goldData = await goldRes.json();

        // سعر الذهب بالدولار للأونصة
        const goldPriceUSD = 1 / goldData.rates.XAU; 
        const goldPriceIQD = goldPriceUSD * usdRate; 
        document.getElementById("gold").innerText = `🥇 الذهب = ${goldPriceIQD.toFixed(0)} دينار للأونصة`;

        // =========================
        // 3. آخر تحديث
        // =========================
        document.getElementById("lastUpdate").innerText = new Date().toLocaleString();

      } catch (error) {
        console.error(error);
        document.getElementById("usd").innerText = "خطأ في جلب سعر الدولار";
        document.getElementById("gold").innerText = "خطأ في جلب سعر الذهب";
      }
    }

    fetchPrices();
    setInterval(fetchPrices, 60000); // تحديث كل دقيقة
  </script>
</body>
</html>
