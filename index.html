<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>أسعار الدولار والذهب</title>
<style>
body { font-family: 'Tahoma', sans-serif; text-align:center; padding:30px; background:#f8f9fa; direction:rtl; }
h1 { color:#2c3e50; margin-bottom:20px; }
.card { background:white; padding:20px; margin:15px auto; border-radius:15px; box-shadow:0 4px 10px rgba(0,0,0,0.1); max-width:350px; }
.price { font-size:1.5em; margin:10px 0; }
footer { margin-top:20px; font-size:0.9em; color:#6c757d; }
</style>
</head>
<body>
<h1>📈 أسعار اليوم في العراق</h1>
<div class="card"><div class="price" id="usd">جاري تحميل سعر الدولار...</div></div>
<div class="card"><div class="price" id="gold">جاري تحميل سعر الذهب...</div></div>
<footer>آخر تحديث: <span id="lastUpdate"></span></footer>

<script>
async function fetchPrices() {
  try {
    // استخدام allorigins لتجاوز مشاكل CORS على GitHub Pages
    const proxyUrl = "https://api.allorigins.win/get?url=";
    const targetUrl = encodeURIComponent("https://api.exchangerate.host/latest?base=USD&symbols=IQD,XAU");
    const res = await fetch(proxyUrl + targetUrl);
    const dataWrapped = await res.json();
    const data = JSON.parse(dataWrapped.contents);

    const usdRate = data.rates.IQD;
    const goldPriceUSD = 1 / data.rates.XAU; 
    const goldPriceIQD = goldPriceUSD * usdRate;

    document.getElementById("usd").innerText = `💵 الدولار = ${usdRate.toFixed(2)} دينار`;
    document.getElementById("gold").innerText = `🥇 الذهب = ${goldPriceIQD.toFixed(0)} دينار للأونصة`;
    document.getElementById("lastUpdate").innerText = new Date().toLocaleString();
  } catch (error) {
    console.error(error);
    document.getElementById("usd").innerText = "خطأ في جلب سعر الدولار";
    document.getElementById("gold").innerText = "خطأ في جلب سعر الذهب";
  }
}

// جلب الأسعار فورًا وتحديث كل دقيقة
fetchPrices();
setInterval(fetchPrices, 60000);
</script>
</body>
</html>
